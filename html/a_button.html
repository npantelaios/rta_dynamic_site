<!DOCTYPE html>
<html lang="en">
  <head>
      <link rel="stylesheet" href="../css/html.css">
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
      <link rel="stylesheet" type="text/css" href="/DataTables/datatables.css"> 
      <script type="text/javascript" charset="utf8" src="/DataTables/datatables.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/4.1.2/papaparse.js"></script>
  </head>

  <body>
    <div class="mybox">
      <a href="../index.html">Home</a>
    </div>
    <div class="mybox">
      <a href="a_button.html">Monsters-S15-SL1</a>
    </div>
    <div class="mybox">
      <a href="b_button.html">Top100-S15-SL1</a>
    </div>

    <div id="wrapper">
      <h1>Top Monsters - Season 15 - Special League 1 (20* sum)</h1>
    </div> 

    <script>
        function getLength(tableData) {
            var length_div = $('<div id="length" class="display" style="font-size: 35px; font-family:\'Helvetica Neue\';" ></div>');
            var battle_sum = 0;
            $(tableData).each(function (i, rowData) {
              if (i>0 & i<=723){
                battle_sum += parseInt(rowData[1]);
              }
            });
            length_div.text("Total battles = " + Math.ceil(battle_sum/10));
            return length_div;
        }
        function arrayToTable(tableData) {
            var table = $('<table id="mytablee" class="display"><thead><tr><th><span>monster_name</span></th><th><span>pick</span></th><th><span>pick-perc</span></th><th><span>win</span></th><th><span>win-perc</span></th><th><span>leader</span></th><th><span>leader-perc</span></th><th><span>first</span></th><th><span>first-perc</span></th><th><span>last</span></th><th><span>last-perc</span></th><th><span>banned</span></th><th><span>banned-perc</span></th><th><span>1p-win</span></th><th><span>5p-win</span></th><th><span>1p-win-perc</span></th><th><span>5p-win-perc</span></th></tr></thead></table>');
            $(tableData).each(function (i, rowData) {
              if (i>0 & i<=723){
              var row = $('<tr></tr>');
                $(rowData).each(function (j, cellData) {
                    row.append($('<td>'+cellData+'</td>'));
                });
                table.append(row);
              }
            });
            return table;
        }
        $.ajax({
            type: "GET",
            url: "../data/data.csv",
            success: function (data) {
                $('body').append(getLength(Papa.parse(data).data));
                $('#wrapper').append(arrayToTable(Papa.parse(data).data));
                $('#mytablee').DataTable();

            }
        });
    </script>

  </body>

</html>
